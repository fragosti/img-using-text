# img-using-text

Utility to help process an image into a string (mostly for ASCII art) in the browser. Use a [File](https://developer.mozilla.org/en-US/docs/Web/API/File) or url. Also exposes an API to retrieve rgba values for a pixel at any position. See example in [index.html](./index.html).

    npm install --save img-using-text

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### isWhiteOrTransparent

Simple estimation for whether an rgba value is white or transparent

**Parameters**

-   `r` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** red
-   `g` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** green
-   `b` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** blue
-   `a` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** alpha

Returns **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** 

### pixelsToText

Convert from ImagePixels to text

**Parameters**

-   `imgPixels` **[ImagePixels](#imagepixels)** instance of ImagePixels containing image information
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** options object
    -   `options.async` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** whether to wrap the work for every row in a setTimeout (optional, default `false`)
    -   `options.charForPixel` **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** the function to call to convert from an {r, g, b, a} object to a character or text. (optional, default `return'x'if!isWhiteOrTransparentelse' '`)

Returns **([string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String) \| [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise))** the resulting text if not async, a Promise otherwise

### imageFromFile

Create an Image object from a File object

**Parameters**

-   `file` **File** the file (from an <input/> for example)

Returns **[Image](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image)** 

### fileToPixels

Given a File it returns an ImagePixels Promise

**Parameters**

-   `file` **File** 
-   `width` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** width value if you want to resize the image (optional, default `imagewidth`)
-   `stretch` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** how much you would like to stretch the height compared to the width (optional, default `1`)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** a bluebird promise

### urlToPixels

Given a URL it returns an ImagePixels Promise

**Parameters**

-   `url` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** url of the image (needs to allows CORS)
-   `width` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** width value if you want to resize the image (optional, default `imagewidth`)
-   `stretch` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** how much you would like to stretch the height compared to the width (optional, default `1`)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** a bluebird promise

### fileToText

Given a File containing an image, convert it to a text representation.

**Parameters**

-   `file` **File** 
-   `width` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** width value if you want to resize the image (optional, default `imagewidth`)
-   `stretch` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** how much you would like to stretch the height compared to the width (optional, default `1`)
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** options object
    -   `options.async` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** whether to wrap the work for every row in a setTimeout (optional, default `false`)
    -   `options.charForPixel` **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** the function to call to convert from an {r, g, b, a} object to a character or text. (optional, default `return'x'if!isWhiteOrTransparentelse' '`)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** a promise that resolves to an ImagePixels instance

### urlToText

Given a File containing an image, convert it to a text representation.

**Parameters**

-   `url` **[string](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** url of the image (needs to allows CORS)
-   `width` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** width value if you want to resize the image (optional, default `imagewidth`)
-   `stretch` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** how much you would like to stretch the height compared to the width (optional, default `1`)
-   `options` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** options object
    -   `options.async` **[boolean](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** whether to wrap the work for every row in a setTimeout (optional, default `false`)
    -   `options.charForPixel` **[function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)** the function to call to convert from an {r, g, b, a} object to a character or text. (optional, default `return'x'if!isWhiteOrTransparentelse' '`)

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** a promise that resolves to an ImagePixels instance

### ImagePixels

A class that wraps a canvas context and allows you to read individual pixels as rgba values.

#### constructor

**Parameters**

-   `img` **[Image](https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/Image)** 
-   `width` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** width value if you want to resize the image (optional, default `imagewidth`)
-   `yStretch` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** how much you would like to stretch the height compared to the width (optional, default `1`)
-   `mockCanvas` **Canvas** mock canvas used only for testing with 'canvas-prebuilt' (optional, default `test-only`)

#### get

Get an Object with keys r, g, b, a representing the pixel at point i, j

**Parameters**

-   `i` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** 
-   `j` **[number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** 

Returns **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** with r, g, b, a values

## Contributing

### Features

-   Build with [webpack 2](https://webpack.js.org/) and [babel](https://babeljs.io/)
-   Test with [jest](https://facebook.github.io/jest/)
-   Lint with [eslint](http://eslint.org/) ([air-bnb config](https://github.com/airbnb/javascript))
-   Document with [documentation](https://github.com/documentationjs/documentation/blob/master/docs/GETTING_STARTED.md)
    ### Commands

#### `npm run clean`

Delete all cache and output files

#### `npm run dev`

Build your library in development mode

#### `npm run build`

Build your library in production mode

### `npm run documentation`

Automatically generate documentation from JSDoc strings and insert them in README.

#### `npm run test`

Run tests

#### `npm run lint`

Check your code for errors and code styles

#### `npm run prepublish`

Hook for npm, that executes when you publishing package in npm repository.

### Lint

This boilerplate uses
[air-bnb code style conventions](https://github.com/airbnb/javascript#table-of-contents),
`.eslintrc` config file:

```js
{
  //...
  
  "extends": "airbnb"
}
```
